# Лабораторна робота № 4
# З Операційних систем
# Тема: Terraform    
Виконала студентка 3 курсу ІСТ    
Стреанга Теодора 
# Завдання    
Створити сценарій Terraform для забезпечення інфраструктури на сервісах GCP (або AWS)   
Вимоги:    
1. Створити одну інстанцію (образ: ubuntu 20.04)    
2. Дозволити передавання даних через HTTP/HTTPS    
3. Забезпечити один публічний SSH-ключ для створеної інстанції    
4. Встановити веб-сервер (Apache HTTP Server / NGINX HTTP Server) за допомогою консолі.    
# Хід роботи
# 1.Зв’язок Terraform із AWS    
Спочатку встановлюємо Terraform та робимо аккаунт в AWS.    
Після цього створюємо нового IAM користувача для їх зв'язку.

 
 
 
Рис 1.1 Створення IAM користувача на сайті AWS
Внаслідок цього ми отримуємо ключі доступу користувача, які знадобляться пізніше.
2.Створення проекту Terraform
Для проекту знадобляться такі файли як:
Файл ключів: key-pair-main.tf
 
 
Рис 1.2 Створення та вміст файлу key-pair-main.tf

Файли змінних провайдеру: provider-variables.tf, terraform.tfvars, provider-main.tf.
 
Рис 1.3 Створення файлів
 
 
 

Рис 1.4 Вміст файлів provider-variables.tf, terraform.tfvars, provider-main.tf
Файли мережі: network-variables.tf, network-main.tf, aws-user-data.sh (для завантаження Apache та створення сторінки).
 
 
 
Рис 1.5 Вміст файлів network-variables.tf, network-main.tf, aws-user-data.sh
Файл версій Ubuntu: ubuntu-versions.tf
 
Рис 1.6 Вміст файлу ubuntu-versions.tf
Файли змінних Linux: linux-variables.tf, linux-vm-main.tf
 
 
Рис 1.7 Вміст файлів linux-variables.tf, linux-vm-main.tf
 
 
Рис 1.8 Створення інстанції EC2 та Elastic IP
Після додавання файлів доповнюємо файл terraform.tfvars
 
Рис 1.9 Доповнений файл terraform.tfvars

 
Рис 1.10 Фінальний вигляд проекту


3.Підняття серверу
Увесь проект спочатку ініціалізується за допомогою команд terraform init
 
 
Рис 1.10 Фінальний вигляд проекту
Команди terraform plan та terraform apply дозволяють переглянути та застосувати конфігурації що описані у файлах до нашої інфраструктури.
 
 
Рис 1.11 Результат команд terraform plan та terraform apply
 
Рис 1.12 Cтворений інстанс на сайті AWS
Цю інстанцію можна у будь-який момент знищити за допомогою команди terraform destroy.
Демонстранція результатів
 
Рис 1.13 Сторінка інстанції
 
 
Рис 1.14 Вхід на Ubuntu за допомогою SSH-ключа
